{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../account/account.service\";\nimport * as i3 from \"../basket/basket.service\";\nimport * as i4 from \"../shared/components/stepper/stepper.component\";\nimport * as i5 from \"@angular/cdk/stepper\";\nimport * as i6 from \"./checkout-address/checkout-address.component\";\nimport * as i7 from \"./checkout-delivery/checkout-delivery.component\";\nimport * as i8 from \"./checkout-review/checkout-review.component\";\nimport * as i9 from \"./checkout-payment/checkout-payment.component\";\nimport * as i10 from \"@angular/common\";\nimport * as i11 from \"../shared/components/order-totals/order-totals.component\";\n\nfunction CheckoutComponent_app_order_totals_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-order-totals\", 11);\n    i0.ɵɵpipe(1, \"async\");\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵpipe(3, \"async\");\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"shippingPrice\", i0.ɵɵpipeBind1(1, 3, ctx_r1.basketTotals$).shipping)(\"subtotal\", i0.ɵɵpipeBind1(2, 5, ctx_r1.basketTotals$).subtotal)(\"total\", i0.ɵɵpipeBind1(3, 7, ctx_r1.basketTotals$).total);\n  }\n}\n\nexport class CheckoutComponent {\n  constructor(fb, accountService, basketService) {\n    this.fb = fb;\n    this.accountService = accountService;\n    this.basketService = basketService;\n  }\n\n  ngOnInit() {\n    this.createCheckoutForm();\n    this.getAddressFormValues();\n    this.getDeliveryMethodValue();\n    this.basketTotals$ = this.basketService.basketTotal$;\n  }\n\n  createCheckoutForm() {\n    this.checkoutForm = this.fb.group({\n      addressForm: this.fb.group({\n        firstName: [null, Validators.required],\n        lastName: [null, Validators.required],\n        street: [null, Validators.required],\n        city: [null, Validators.required],\n        state: [null, Validators.required],\n        zipcode: [null, Validators.required]\n      }),\n      deliveryForm: this.fb.group({\n        deliveryMethod: [null, Validators.required]\n      }),\n      paymentForm: this.fb.group({\n        nameOnCard: [null, Validators.required]\n      })\n    });\n  }\n\n  getAddressFormValues() {\n    this.accountService.getUserAddress().subscribe(address => {\n      if (address) {\n        this.checkoutForm.get('addressForm').patchValue(address);\n      }\n    }, error => {\n      console.log(error);\n    });\n  }\n\n  getDeliveryMethodValue() {\n    const basket = this.basketService.getCurrentBasketValue();\n\n    if (basket.deliveryMethodId !== null) {\n      this.checkoutForm.get('deliveryForm').get('deliveryMethod').patchValue(basket.deliveryMethodId.toString());\n    }\n  }\n\n}\n\nCheckoutComponent.ɵfac = function CheckoutComponent_Factory(t) {\n  return new (t || CheckoutComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AccountService), i0.ɵɵdirectiveInject(i3.BasketService));\n};\n\nCheckoutComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CheckoutComponent,\n  selectors: [[\"app-checkout\"]],\n  decls: 16,\n  vars: 14,\n  consts: [[1, \"container\", \"mt-5\"], [1, \"row\"], [1, \"col-8\"], [3, \"linearModeSelected\"], [\"appStepper\", \"\"], [3, \"label\", \"completed\"], [3, \"checkoutForm\"], [3, \"label\"], [3, \"appStepper\"], [1, \"col-4\"], [3, \"shippingPrice\", \"subtotal\", \"total\", 4, \"ngIf\"], [3, \"shippingPrice\", \"subtotal\", \"total\"]],\n  template: function CheckoutComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"app-stepper\", 3, 4)(5, \"cdk-step\", 5);\n      i0.ɵɵelement(6, \"app-checkout-address\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"cdk-step\", 5);\n      i0.ɵɵelement(8, \"app-checkout-delivery\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"cdk-step\", 7);\n      i0.ɵɵelement(10, \"app-checkout-review\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"cdk-step\", 7);\n      i0.ɵɵelement(12, \"app-checkout-payment\", 6);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(13, \"div\", 9);\n      i0.ɵɵtemplate(14, CheckoutComponent_app_order_totals_14_Template, 4, 9, \"app-order-totals\", 10);\n      i0.ɵɵpipe(15, \"async\");\n      i0.ɵɵelementEnd()()();\n    }\n\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(4);\n\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"linearModeSelected\", true);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"label\", \"Address\")(\"completed\", ctx.checkoutForm.get(\"addressForm\").valid);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"checkoutForm\", ctx.checkoutForm);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"label\", \"Delivery\")(\"completed\", ctx.checkoutForm.get(\"deliveryForm\").valid);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"checkoutForm\", ctx.checkoutForm);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"label\", \"Review\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"appStepper\", _r0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"label\", \"Payment\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"checkoutForm\", ctx.checkoutForm);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(15, 12, ctx.basketTotals$));\n    }\n  },\n  directives: [i4.StepperComponent, i5.CdkStep, i6.CheckoutAddressComponent, i7.CheckoutDeliveryComponent, i8.CheckoutReviewComponent, i9.CheckoutPaymentComponent, i10.NgIf, i11.OrderTotalsComponent],\n  pipes: [i10.AsyncPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjaGVja291dC5jb21wb25lbnQuc2NzcyJ9 */\"]\n});","map":{"version":3,"sources":["C:/dotnet/Talic/skinet/client/src/app/checkout/checkout.component.ts"],"names":["Validators","i0","i1","i2","i3","i4","i5","i6","i7","i8","i9","i10","i11","CheckoutComponent_app_order_totals_14_Template","rf","ctx","ɵɵelement","ɵɵpipe","ctx_r1","ɵɵnextContext","ɵɵproperty","ɵɵpipeBind1","basketTotals$","shipping","subtotal","total","CheckoutComponent","constructor","fb","accountService","basketService","ngOnInit","createCheckoutForm","getAddressFormValues","getDeliveryMethodValue","basketTotal$","checkoutForm","group","addressForm","firstName","required","lastName","street","city","state","zipcode","deliveryForm","deliveryMethod","paymentForm","nameOnCard","getUserAddress","subscribe","address","get","patchValue","error","console","log","basket","getCurrentBasketValue","deliveryMethodId","toString","ɵfac","CheckoutComponent_Factory","t","ɵɵdirectiveInject","FormBuilder","AccountService","BasketService","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","CheckoutComponent_Template","ɵɵelementStart","ɵɵelementEnd","ɵɵtemplate","_r0","ɵɵreference","ɵɵadvance","valid","directives","StepperComponent","CdkStep","CheckoutAddressComponent","CheckoutDeliveryComponent","CheckoutReviewComponent","CheckoutPaymentComponent","NgIf","OrderTotalsComponent","pipes","AsyncPipe","styles"],"mappings":"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","sourcesContent":["import { Validators } from '@angular/forms';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/forms\";\r\nimport * as i2 from \"../account/account.service\";\r\nimport * as i3 from \"../basket/basket.service\";\r\nimport * as i4 from \"../shared/components/stepper/stepper.component\";\r\nimport * as i5 from \"@angular/cdk/stepper\";\r\nimport * as i6 from \"./checkout-address/checkout-address.component\";\r\nimport * as i7 from \"./checkout-delivery/checkout-delivery.component\";\r\nimport * as i8 from \"./checkout-review/checkout-review.component\";\r\nimport * as i9 from \"./checkout-payment/checkout-payment.component\";\r\nimport * as i10 from \"@angular/common\";\r\nimport * as i11 from \"../shared/components/order-totals/order-totals.component\";\r\nfunction CheckoutComponent_app_order_totals_14_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelement(0, \"app-order-totals\", 11);\r\n    i0.ɵɵpipe(1, \"async\");\r\n    i0.ɵɵpipe(2, \"async\");\r\n    i0.ɵɵpipe(3, \"async\");\r\n} if (rf & 2) {\r\n    const ctx_r1 = i0.ɵɵnextContext();\r\n    i0.ɵɵproperty(\"shippingPrice\", i0.ɵɵpipeBind1(1, 3, ctx_r1.basketTotals$).shipping)(\"subtotal\", i0.ɵɵpipeBind1(2, 5, ctx_r1.basketTotals$).subtotal)(\"total\", i0.ɵɵpipeBind1(3, 7, ctx_r1.basketTotals$).total);\r\n} }\r\nexport class CheckoutComponent {\r\n    constructor(fb, accountService, basketService) {\r\n        this.fb = fb;\r\n        this.accountService = accountService;\r\n        this.basketService = basketService;\r\n    }\r\n    ngOnInit() {\r\n        this.createCheckoutForm();\r\n        this.getAddressFormValues();\r\n        this.getDeliveryMethodValue();\r\n        this.basketTotals$ = this.basketService.basketTotal$;\r\n    }\r\n    createCheckoutForm() {\r\n        this.checkoutForm = this.fb.group({\r\n            addressForm: this.fb.group({\r\n                firstName: [null, Validators.required],\r\n                lastName: [null, Validators.required],\r\n                street: [null, Validators.required],\r\n                city: [null, Validators.required],\r\n                state: [null, Validators.required],\r\n                zipcode: [null, Validators.required]\r\n            }),\r\n            deliveryForm: this.fb.group({\r\n                deliveryMethod: [null, Validators.required]\r\n            }),\r\n            paymentForm: this.fb.group({\r\n                nameOnCard: [null, Validators.required]\r\n            })\r\n        });\r\n    }\r\n    getAddressFormValues() {\r\n        this.accountService.getUserAddress().subscribe(address => {\r\n            if (address) {\r\n                this.checkoutForm.get('addressForm').patchValue(address);\r\n            }\r\n        }, error => {\r\n            console.log(error);\r\n        });\r\n    }\r\n    getDeliveryMethodValue() {\r\n        const basket = this.basketService.getCurrentBasketValue();\r\n        if (basket.deliveryMethodId !== null) {\r\n            this.checkoutForm.get('deliveryForm').get('deliveryMethod').patchValue(basket.deliveryMethodId.toString());\r\n        }\r\n    }\r\n}\r\nCheckoutComponent.ɵfac = function CheckoutComponent_Factory(t) { return new (t || CheckoutComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AccountService), i0.ɵɵdirectiveInject(i3.BasketService)); };\r\nCheckoutComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: CheckoutComponent, selectors: [[\"app-checkout\"]], decls: 16, vars: 14, consts: [[1, \"container\", \"mt-5\"], [1, \"row\"], [1, \"col-8\"], [3, \"linearModeSelected\"], [\"appStepper\", \"\"], [3, \"label\", \"completed\"], [3, \"checkoutForm\"], [3, \"label\"], [3, \"appStepper\"], [1, \"col-4\"], [3, \"shippingPrice\", \"subtotal\", \"total\", 4, \"ngIf\"], [3, \"shippingPrice\", \"subtotal\", \"total\"]], template: function CheckoutComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"app-stepper\", 3, 4)(5, \"cdk-step\", 5);\r\n        i0.ɵɵelement(6, \"app-checkout-address\", 6);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(7, \"cdk-step\", 5);\r\n        i0.ɵɵelement(8, \"app-checkout-delivery\", 6);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(9, \"cdk-step\", 7);\r\n        i0.ɵɵelement(10, \"app-checkout-review\", 8);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(11, \"cdk-step\", 7);\r\n        i0.ɵɵelement(12, \"app-checkout-payment\", 6);\r\n        i0.ɵɵelementEnd()()();\r\n        i0.ɵɵelementStart(13, \"div\", 9);\r\n        i0.ɵɵtemplate(14, CheckoutComponent_app_order_totals_14_Template, 4, 9, \"app-order-totals\", 10);\r\n        i0.ɵɵpipe(15, \"async\");\r\n        i0.ɵɵelementEnd()()();\r\n    } if (rf & 2) {\r\n        const _r0 = i0.ɵɵreference(4);\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"linearModeSelected\", true);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"label\", \"Address\")(\"completed\", ctx.checkoutForm.get(\"addressForm\").valid);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"checkoutForm\", ctx.checkoutForm);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"label\", \"Delivery\")(\"completed\", ctx.checkoutForm.get(\"deliveryForm\").valid);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"checkoutForm\", ctx.checkoutForm);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"label\", \"Review\");\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"appStepper\", _r0);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"label\", \"Payment\");\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"checkoutForm\", ctx.checkoutForm);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(15, 12, ctx.basketTotals$));\r\n    } }, directives: [i4.StepperComponent, i5.CdkStep, i6.CheckoutAddressComponent, i7.CheckoutDeliveryComponent, i8.CheckoutReviewComponent, i9.CheckoutPaymentComponent, i10.NgIf, i11.OrderTotalsComponent], pipes: [i10.AsyncPipe], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjaGVja291dC5jb21wb25lbnQuc2NzcyJ9 */\"] });\r\n"]},"metadata":{},"sourceType":"module"}